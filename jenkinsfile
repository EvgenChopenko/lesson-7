pipeline {
    agent { 
        label 'azure'
        }
    options {
        buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
        timestamps()
        }
    stages{ 
        stage("Create docker image"){
            agent any
            steps{
                sh 'ls -la'
                sh 'docker build . -t node_levelup:latest'
        }
    }
        stage ("Start Container"){
            agent any
            steps{
                sh 'docker run -p 8080:8080 -d node_levelup:latest'
        }
    }
} 
}
